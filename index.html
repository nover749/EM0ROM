<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Web Emulator (Working)</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
  body {
    margin: 0;
    background: black;
    color: #0f0;
    font-family: monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #controls {
    margin: 12px;
  }
  select, input, button {
    padding: 8px;
    margin: 4px;
    background: #000;
    color: #0f0;
    border: 1px solid #0f0;
  }
  #game {
    width: 800px;
    height: 600px;
    border: 2px solid #0f0;
    background: black;
    margin-top: 12px;
  }
</style>
</head>
<body>

<h2>Web Emulator (Powered by EmulatorJS)</h2>

<div id="controls">
  <input type="file" id="romPicker" accept=".nes,.sfc,.smc,.gb,.gbc,.gba,.bin,.iso">
  <select id="system">
    <option value="">Select System</option>
    <option value="nes">NES</option>
    <option value="snes">SNES</option>
    <option value="gba">GBA</option>
    <option value="gb">Game Boy / Game Boy Color</option>
    <option value="genesis">Genesis / Mega Drive</option>
    <option value="sms">Sega Master System</option>
    <option value="gamegear">Game Gear</option>
    <option value="psx">PlayStation</option>
  </select>
  <button id="startBtn">Start Game</button>
</div>

<div id="game"></div>

<script>
document.getElementById("startBtn").onclick = () => {
  const romFile = document.getElementById("romPicker").files[0];
  const sys = document.getElementById("system").value;
  if (!romFile || !sys) return alert("Choose a ROM and system.");

  // Prepare EmulatorJS
  window.EJS_player = "#game";
  window.EJS_core = sys;
  window.EJS_gameUrl = URL.createObjectURL(romFile);
  window.EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";
  window.EJS_startOnLoaded = true;

  // Optional: set BIOS URLs if needed
  window.EJS_biosUrl = "";

  // Load the emulator
  const s = document.createElement("script");
  s.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
  document.body.appendChild(s);
};
</script>

</body>
</html>
