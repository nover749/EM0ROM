<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Web Emulator (Working)</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
  body {
    margin: 0;
    background: black;
    color: #0f0;
    font-family: monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #controls {
    margin: 12px;
  }
  select, input, button {
    padding: 8px;
    margin: 4px;
    background: #000;
    color: #0f0;
    border: 1px solid #0f0;
  }
  #game {
    width: 800px;
    height: 600px;
    border: 2px solid #0f0;
    background: black;
    margin-top: 12px;
  }
</style>
</head>
<body>

<h2>Web Emulator (Powered by EmulatorJS)</h2>

<div id="controls">
  <input type="file" id="romPicker">
  <select id="system">
    <option value="">Select System</option>

    <!-- Nintendo -->
    <option value="nes">NES / Famicom</option>
    <option value="fds">Famicom Disk System</option>
    <option value="snes">SNES / Super Famicom</option>
    <option value="n64">Nintendo 64</option>
    <option value="gb">Game Boy</option>
    <option value="gbc">Game Boy Color</option>
    <option value="gba">Game Boy Advance</option>
    <option value="nds">Nintendo DS</option>
    <option value="vb">Virtual Boy</option>

    <!-- Sega -->
    <option value="sms">Sega Master System</option>
    <option value="gg">Game Gear</option>
    <option value="md">Genesis / Mega Drive</option>
    <option value="segacd">Sega CD</option>
    <option value="32x">Sega 32X</option>
    <option value="saturn">Sega Saturn</option>
    <option value="dreamcast">Dreamcast</option>

    <!-- Sony -->
    <option value="psx">PlayStation (PS1)</option>
    <option value="psp">PlayStation Portable</option>

    <!-- Arcade -->
    <option value="mame2003">MAME 2003</option>
    <option value="mame2010">MAME 2010</option>
    <option value="fbneo">FinalBurn Neo</option>
    <option value="neogeo">Neo Geo</option>
    <option value="cps1">Capcom CPS1</option>
    <option value="cps2">Capcom CPS2</option>
    <option value="cps3">Capcom CPS3</option>

    <!-- Atari -->
    <option value="atari2600">Atari 2600</option>
    <option value="atari5200">Atari 5200</option>
    <option value="atari7800">Atari 7800</option>
    <option value="lynx">Atari Lynx</option>
    <option value="jaguar">Atari Jaguar</option>

    <!-- NEC -->
    <option value="pce">PC Engine / TurboGrafx-16</option>
    <option value="pcecd">PC Engine CD</option>
    <option value="supergrafx">SuperGrafx</option>

    <!-- SNK -->
    <option value="ngp">Neo Geo Pocket</option>
    <option value="ngpc">Neo Geo Pocket Color</option>

    <!-- Other Consoles -->
    <option value="ws">WonderSwan</option>
    <option value="wsc">WonderSwan Color</option>
    <option value="coleco">ColecoVision</option>
    <option value="intellivision">Intellivision</option>

    <!-- Computers -->
    <option value="c64">Commodore 64</option>
    <option value="amiga">Amiga 500</option>
    <option value="dos">MS-DOS</option>
    <option value="zxspectrum">ZX Spectrum</option>

    <!-- Desktop-only -->
    <option value="gamecube">Nintendo GameCube (Dolphin)</option>
  </select>

  <button id="startBtn">Start Game</button>
</div>

<div id="game"></div>

<script>
/* Disable page scrolling for emulator keys */
window.addEventListener("keydown", function (e) {
  const keys = ["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "];
  if (keys.includes(e.key)) e.preventDefault();
}, { passive: false });

document.getElementById("startBtn").onclick = () => {
  const romFile = document.getElementById("romPicker").files[0];
  const sys = document.getElementById("system").value;
  if (!romFile || !sys) return alert("Choose a ROM and system.");

  /* GameCube â†’ Dolphin (Electron only) */
  if (sys === "gamecube") {
    if (window.gamecube && window.gamecube.launch) {
      window.gamecube.launch(romFile.path);
    } else {
      alert("GameCube works only in the desktop app (Electron + Dolphin).");
    }
    return;
  }

  /* EmulatorJS systems */
  document.getElementById("game").innerHTML = "";

  window.EJS_player = "#game";
  window.EJS_core = sys;
  window.EJS_gameUrl = URL.createObjectURL(romFile);
  window.EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";
  window.EJS_startOnLoaded = true;
  window.EJS_biosUrl = "";

  const s = document.createElement("script");
  s.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
  document.body.appendChild(s);
};
</script>

</body>
</html>
